<div class="col-lg-8">
  <%= search_form_for @q, html: { class: 'form-inline' } do |f| %>
    <div class='form-group has-feedback has-clear'>
      <label for='dob'>Ano da Compra:</label>
      <%= f.search_field :purchased_at, placeholder: "Ano da Compra", class: "form-control datetimepicker", value: params.fetch(:q, {}).fetch(:purchased_at, nil) %>
      <span class="form-control-clear fa fa-times form-control-feedback"></span>
    </div>

    <div class='form-group'>
      <label for='dob'>Mês de Aniversário:</label>
      <%= f.select :dob, 1..12, {selected: params.fetch(:q, {}).fetch(:dob, nil), include_blank: true}, class: 'form-control dropdown-toggle', onchange: "this.form.submit()" %>
    </div>

    <div class='form-group has-feedback has-clear'>
      <%= f.search_field :name_cont, placeholder: I18n.t("activerecord.attributes.customer.name"), class: "form-control" %>
      <span class="form-control-clear fa fa-times form-control-feedback"></span>
    </div>

    <div class='form-group has-feedback has-clear'>
      <%= f.search_field :devices_store_or_devices_other_store_cont, placeholder: I18n.t("activerecord.attributes.device.store"), class: "form-control" %>
      <span class="form-control-clear fa fa-times form-control-feedback"></span>
    </div>

    <%= f.submit "Filtrar", class: 'btn btn-primary' %>
  <% end %>
</div>

<%= javascript_tag do %>
  $('.form-control-clear').click(function() {
    $(this).prev('input').val('').focus()
  });

  $('.datetimepicker').datetimepicker({
    format: 'YYYY',
    viewMode: 'years',
    icons: {
        up: "fa fa-chevron-circle-up",
        down: "fa fa-chevron-circle-down",
        next: 'fa fa-chevron-circle-right',
        previous: 'fa fa-chevron-circle-left'
    }
    });
<% end %>
